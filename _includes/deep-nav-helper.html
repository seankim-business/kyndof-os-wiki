<!-- Deep Navigation Helper -->
<!-- Usage: {% include deep-nav-helper.html %} -->

<div class="page-nav-tree">
  <div class="nav-tree-title">ğŸ“ You are here</div>

  {% if page.grand_parent %}
    <div class="breadcrumb-trail">
      <a href="{{ site.baseurl }}/">Home</a>
      {% if page.grand_parent %}
        â†’ <a href="{{ site.baseurl }}/{{ page.grand_parent | downcase | replace: ' ', '-' }}/">{{ page.grand_parent }}</a>
      {% endif %}
      {% if page.parent %}
        â†’ <a href="{{ site.baseurl }}/{{ page.parent | downcase | replace: ' ', '-' }}/">{{ page.parent }}</a>
      {% endif %}
      â†’ <strong>{{ page.title }}</strong>
    </div>
  {% elsif page.parent %}
    <div class="breadcrumb-trail">
      <a href="{{ site.baseurl }}/">Home</a>
      â†’ <a href="{{ site.baseurl }}/{{ page.parent | downcase | replace: ' ', '-' }}/">{{ page.parent }}</a>
      â†’ <strong>{{ page.title }}</strong>
    </div>
  {% endif %}

  {% if page.has_children %}
    <div class="child-pages">
      <p style="margin-top: 1rem; font-size: 0.9rem; color: #666;">Child pages:</p>
      <ul class="nav-tree-list">
        {% assign children = site.pages | where: "parent", page.title | sort: "nav_order" %}
        {% for child in children %}
          <li>
            <a href="{{ child.url | relative_url }}">{{ child.title }}</a>
            {% if child.description %}
              <span style="color: #888; font-size: 0.85rem;"> - {{ child.description }}</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}
</div>
