---
/**
 * Backlinks Component
 * Shows pages that link to the current page
 */

interface BacklinkEntry {
  slug: string;
  title: string;
  type?: string;
  excerpt?: string;
}

interface Props {
  currentSlug: string;
  backlinks?: BacklinkEntry[];
}

const { currentSlug, backlinks = [] } = Astro.props;

// In a real implementation, backlinks would be computed at build time
// by scanning all content files for [[wikilinks]] pointing to this page
---

{backlinks.length > 0 && (
  <aside class="backlinks">
    <h3 class="backlinks-title">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
      <span>Linked from {backlinks.length} page{backlinks.length !== 1 ? 's' : ''}</span>
    </h3>
    <ul class="backlinks-list">
      {backlinks.map((link) => (
        <li class="backlink-item">
          <a href={`/${link.slug}`} class="backlink-link">
            {link.type && <span class="backlink-type">{link.type}</span>}
            <span class="backlink-title">{link.title}</span>
          </a>
          {link.excerpt && <p class="backlink-excerpt">{link.excerpt}</p>}
        </li>
      ))}
    </ul>
  </aside>
)}

<style>
  .backlinks {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-lg);
    border-top: 1px solid var(--border-color);
  }

  .backlinks-title {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin: 0 0 var(--spacing-md);
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
  }

  .backlinks-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
  }

  .backlink-item {
    padding: var(--spacing-sm);
    background: var(--bg-secondary);
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
  }

  .backlink-link {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    text-decoration: none;
    color: var(--text-primary);
    font-weight: 500;
  }

  .backlink-link:hover {
    color: var(--link-color);
  }

  .backlink-type {
    font-size: 11px;
    padding: 2px 6px;
    background: var(--bg-tertiary);
    border-radius: var(--radius-sm);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .backlink-excerpt {
    margin: var(--spacing-xs) 0 0;
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.5;
  }
</style>
